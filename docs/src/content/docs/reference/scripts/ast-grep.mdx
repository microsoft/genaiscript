---
title: ast-grep
description: Search for patterns in the AST of a script
---

[ast-grep](https://ast-grep.github.io/) is a fast and polyglot tool for code structural search, lint, rewriting at large scale.

GenAISCript provides a wrapper around `ast-grep` to search for patterns in the AST of a script,
and transform the AST! This is a very efficient way to create scripts that modify source code as one is able
to surgically target specific parts of the code.

- find all TypeScript `console.log` statements. This example uses the 'pattern' syntax.

```ts
const { matches } = await asg.search("ts", "src/*.ts", "console.log($META)")
```

- find all TypeScript functions without comments. This example uses the [rule syntax](https://ast-grep.github.io/reference/rule.html).

```ts
const { matches } = await asg.search("ts", "src/fib.ts", {
    rule: {
        kind: "function_declaration",
        not: {
            precedes: {
                kind: "comment",
                stopBy: "neighbor",
            },
        },
    },
})
```

:::tip

GenAIScript provides a simplified set of interfaces to interact with the `ast-grep` [JavaScript apis](https://ast-grep.github.io/guide/api-usage/js-api.html).
However, they are indeed the native `ast-grep` APIs, and you can use them directly if you need more control.

:::

## search and replace



## Learning ast-grep

There is a learning curve to grasp the query language of `ast-grep`.

- the [official documentation](https://ast-grep.github.io/docs/) is a good place to start.
- the [online playground](https://ast-grep.github.io/playground.html) allows you to experiment with the tool without installing it.
- download [llms.txt](https://ast-grep.github.io/llms-full.txt) into to your Copilot context for best results.
